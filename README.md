# FreeBSD 14 Packer Template for Ansible Role Testing

[![Build and Release](https://github.com/pluggero/vagrant-freebsd14-ansible/actions/workflows/release.yml/badge.svg)](https://github.com/pluggero/vagrant-freebsd14-ansible/actions/workflows/release.yml)

## ⚠️ Security Warning

**This box is intended for testing and development purposes only. DO NOT use in production environments.**

This Vagrant box contains:

- Publicly known insecure SSH keys (Vagrant default keys)
- Public passwords visible in the repository
- Pre-configured users with known credentials

These are intentionally included for transparent testing but make this box completely insecure for production use.

## Supported Hypervisor Platforms

- VirtualBox

## Quick Start

### Requirements

- At least one of the supported Hypervisor platforms
- Vagrant

### Installation

- Take a look at https://portal.cloud.hashicorp.com/vagrant/discover/pluggero/freebsd14-ansible to get started with the Vagrant box.

### Verifying Box Provenance

To ensure the Vagrant box you download was built from this repository without modification, follow these verification steps:

#### Step 1: Download the checksums file

```bash
# Download the checksums file from the GitHub Actions artifacts
# Visit: https://github.com/pluggero/packer-archlinux-ansible/actions/workflows/release.yml
# Click on the workflow run for your version
# Download the "checksums-VERSION" artifact
```

#### Step 2: Verify the attestation

```bash
# Install GitHub CLI if not already installed: https://cli.github.com/

# Verify the checksums file was generated by our CI/CD pipeline
gh attestation verify checksums.txt --owner pluggero
```

This cryptographically proves the checksums file was created by our pipeline from a specific git commit.

#### Step 3: Verify the box checksum

```bash
# Calculate the SHA256 of your downloaded box
sha256sum freebsd14-virtualbox.box

# Compare with the checksum in checksums.txt
cat checksums.txt
```

The checksums must match. If they don't, the box was modified after the build.

#### What This Proves

- The checksums file was generated by our GitHub Actions pipeline (attestation)
- The box matches the checksum from the pipeline (manual verification)
- The box was built from a specific git commit (metadata in checksums.txt)
- The box uploaded to Vagrant Cloud has not been tampered with

**Note**: Each box version also includes build metadata in its Vagrant Cloud description with the git commit SHA and workflow run link for additional verification.

## Creating your own box

1. Make sure you met the requirements above
2. Clone this repository
3. Create virtual python environment
4. Install dependencies
5. Run the build script to create the box in the `packer/outputs` directory:

```bash
scripts/freebsd14_builder.sh
```

## License

MIT / BSD

## Author Information

This role was created in 2025 by Robin Plugge.
